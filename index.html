<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="estilo/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="arquivos/icones/logoOne.png" type="image/x-icon">
    <title>OneSharp</title>
</head>
<body>
    
    <main class="main" id="main">

       <div class="areaLogo">
           <img src="arquivos/icones/logoOne.png">
           <h1>OneSharp</h1>

           <p>
            Este site é focado em vendas de <br> conteúdos digitais e serviços.
           </p>

           <div class="areaDosBtn">
            <button onclick="irLogin()">Entrar</button>
            <button onclick="criarContoUser()">Criar conta</button>
           </div>
       </div>

       <p id="avisoteste">Versão de teste (BETA)</p>

    </main> 

    <div class="novaconta" id="novaconta">
        <div class="novacontadois">
            <div class="novacontatres">
                <div class="fecha" onclick="fechacadastro()"></div>
                    <div class="entradaDados">

                    <form>

                        <h4>Cadastre o seu e-mail e senha!</h4>

                        <p>Digite seu email</p>
                        <input type="email" name="nMail" id="email" placeholder="Digite seu email">
        
                        <p>Criar uma senha</p>
                        <input type="password" minlength="8" name="nSenha" id="pass" placeholder="Senha de 8 digitos">
        
                        <!--================-->
        
                        <p>Repita a senha</p>
                        <input type="password"  maxlength="8" name="dnSenha" id="dnSenha" placeholder="Senha de 8 digitos">
                    
                     </form>

                        <div class="areaDeButoes">
                
                            <button id="singnup">criar conta</button>
                
                        </div>

            </div>

            </div>
        </div>
    </div>

    <script src="controle/app.js"></script>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-auth.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyAb-zspDkoMIMdkqa72SkZXXxj6xu1vBPo",
          authDomain: "onesharp-5cc2b.firebaseapp.com",
          projectId: "onesharp-5cc2b",
          storageBucket: "onesharp-5cc2b.appspot.com",
          messagingSenderId: "482361189461",
          appId: "1:482361189461:web:e4311ae8f31065770120dc"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        document.getElementById('singnup').addEventListener('click', function(){

            const email = document.getElementById('email').value
            const password = document.getElementById('pass').value
            const senhadois = document.getElementById('dnSenha').value

            if(email == '' || password == '' || senhadois == ''){
                alert('falta dados!')
            }else if(password != senhadois){
                alert('As senhas estão diferentes')
            }else if(password <= 6){
                alert('A senha precisa ter mais de 6 caracteres')
            }else{
                createUserWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    // Signed in
                    const user = userCredential.user;
                    // ...
                    alert('Cadastrado')
                    novaconta.style.display='none'
                })
                .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    // ..
                    alert('OPS! houve algum erro')
                });
            }
        })


      </script>
</body>
</html>